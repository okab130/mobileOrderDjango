# システム要件定義テンプレート
# スマホ×ダッシュボード型システム

## ドキュメント情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | [プロジェクト名を記入] |
| システム名 | [システム名を記入] |
| バージョン | 1.0 |
| 作成日 | YYYY-MM-DD |
| 最終更新日 | YYYY-MM-DD |
| 作成者 | [作成者名] |
| 承認者 | [承認者名] |

---

## 1. プロジェクト概要

### 1.1 背景と目的
- **背景**
  - [なぜこのシステムが必要になったのか]
  - [現状の課題]
  
- **目的**
  - [このシステムで実現したいこと]
  - [解決したい課題]

### 1.2 システムの位置づけ
- **対象業務**: [対象となる業務領域]
- **利用部門**: [利用する部門・組織]
- **システム範囲**: [システムがカバーする範囲]

### 1.3 期待される効果
- [ ] [効果1: 定量的に記述（例：作業時間30%削減）]
- [ ] [効果2]
- [ ] [効果3]

---

## 2. システム構成

### 2.1 システムアーキテクチャ

```
[スマホ(顧客側)] ←→ [Webサーバー] ←→ [データベース]
                           ↕
                  [PC/タブレット(管理側)]
```

### 2.2 利用者区分

| 利用者区分 | 人数 | 利用デバイス | 主な役割 |
|-----------|------|-------------|---------|
| エンドユーザー（顧客） | [想定人数] | スマホ | [役割を記述] |
| オペレーター（スタッフ） | [想定人数] | PC/タブレット | [役割を記述] |
| 管理者 | [想定人数] | PC/タブレット | [役割を記述] |

### 2.3 技術スタック

| 項目 | 技術・ツール | バージョン | 備考 |
|------|-------------|-----------|------|
| バックエンド言語 | [例: Python] | [3.x] | |
| Webフレームワーク | [例: Django] | [4.x] | |
| データベース | [例: SQLite/PostgreSQL] | | |
| フロントエンド | [例: Bootstrap] | | |
| 外部API | [例: OpenAI, 決済API] | | 必要に応じて |

---

## 3. 機能要件

### 3.1 エンドユーザー（スマホ）側機能

#### 3.1.1 セッション管理
- **セッション開始**
  - [ ] QRコード読み取りによるアクセス
  - [ ] URLパラメータによる識別（テーブル番号等）
  - [ ] 初回情報入力（人数、名前等）
  - [ ] セッションIDの発行
  
- **セッション中の状態管理**
  - [ ] セッション継続中の表示
  - [ ] 複数デバイスからの同時アクセス対応
  - [ ] セッションタイムアウト設定
  
- **セッション終了**
  - [ ] 会計完了時の自動終了
  - [ ] 手動終了機能
  - [ ] 終了後のメッセージ表示

#### 3.1.2 メイン機能
- **[機能名1: 例：メニュー閲覧]**
  - [ ] 一覧表示
  - [ ] カテゴリ分類
  - [ ] 画像表示
  - [ ] 詳細情報表示
  - [ ] 検索・フィルター機能
  
- **[機能名2: 例：注文]**
  - [ ] 商品選択
  - [ ] 数量選択（範囲: 最小〜最大）
  - [ ] オプション選択
  - [ ] カート機能
  - [ ] 注文確定
  - [ ] 注文確認画面
  
- **[機能名3: 例：履歴確認]**
  - [ ] 注文履歴表示
  - [ ] ステータス表示
  - [ ] リアルタイム更新
  - [ ] 詳細表示

- **[機能名4: 例：スタッフ呼び出し]**
  - [ ] 呼び出しボタン
  - [ ] 理由選択
  - [ ] 呼び出し中表示
  - [ ] 対応完了通知

- **[機能名5: 例：会計確認]**
  - [ ] 合計金額表示
  - [ ] 明細表示
  - [ ] 割り勘計算
  - [ ] QRコード決済連携（オプション）

#### 3.1.3 UI/UX要件
- [ ] レスポンシブデザイン（スマホ最適化）
- [ ] タップしやすいボタンサイズ（最小44x44px）
- [ ] 直感的な操作性
- [ ] 日本語対応
- [ ] エラーメッセージの分かりやすさ
- [ ] ローディング表示
- [ ] オフライン時の挙動

---

### 3.2 管理側（ダッシュボード）機能

#### 3.2.1 認証・権限管理
- **ログイン**
  - [ ] ユーザー名・パスワード認証
  - [ ] セッション管理
  - [ ] 自動ログアウト（タイムアウト）
  
- **権限区分**
  
| 権限 | 機能アクセス範囲 |
|------|----------------|
| 管理者 | 全機能アクセス可能 |
| スタッフ | [アクセス可能な機能をリスト] |
| 閲覧者 | [アクセス可能な機能をリスト] |

#### 3.2.2 リアルタイム監視機能
- **ダッシュボード**
  - [ ] 現在の状態一覧表示
  - [ ] ステータス別フィルター
  - [ ] 自動更新（更新間隔: XX秒）
  - [ ] 緊急通知表示
  - [ ] 統計サマリー表示

- **[監視対象1: 例：注文管理]**
  - [ ] 未処理一覧
  - [ ] 処理中一覧
  - [ ] 完了一覧
  - [ ] ステータス変更機能
  - [ ] 経過時間表示
  - [ ] 優先度表示

- **[監視対象2: 例：呼び出し管理]**
  - [ ] 未対応一覧
  - [ ] 対応中一覧
  - [ ] 対応完了処理
  - [ ] 履歴表示

#### 3.2.3 データ管理機能
- **[マスタ管理1: 例：商品管理]**
  - [ ] 一覧表示
  - [ ] 新規登録
  - [ ] 編集
  - [ ] 削除（論理削除/物理削除）
  - [ ] 有効/無効切り替え
  - [ ] 画像アップロード
  - [ ] 一括操作

- **[マスタ管理2: 例：ユーザー管理]**
  - [ ] ユーザー一覧
  - [ ] 新規作成
  - [ ] 編集
  - [ ] パスワードリセット
  - [ ] 権限変更
  - [ ] 有効/無効切り替え

#### 3.2.4 会計・レポート機能
- **会計処理**
  - [ ] セッション選択
  - [ ] 会計詳細表示
  - [ ] レシート印刷
  - [ ] 会計完了処理
  - [ ] 決済方法記録

- **レポート・分析**
  - [ ] 日別売上
  - [ ] 時間帯別売上
  - [ ] 商品別売上
  - [ ] ランキング表示
  - [ ] CSVエクスポート
  - [ ] グラフ表示

#### 3.2.5 UI/UX要件
- [ ] PC/タブレット対応
- [ ] 直感的な操作性
- [ ] キーボードショートカット対応
- [ ] 一覧表示の見やすさ
- [ ] アラート・通知の明確さ
- [ ] レスポンシブ対応

---

## 4. 非機能要件

### 4.1 パフォーマンス要件
- **応答時間**
  - [ ] 画面表示: X秒以内
  - [ ] データ更新: X秒以内
  - [ ] 検索処理: X秒以内

- **同時接続数**
  - [ ] 想定同時接続数: XX人
  - [ ] ピーク時対応: XXX人

- **データ量**
  - [ ] 1日あたりのトランザクション数: XXX件
  - [ ] データ保存期間: X年

### 4.2 可用性要件
- **稼働時間**
  - [ ] 稼働時間: 24時間365日 / 営業時間のみ
  - [ ] 目標稼働率: XX.X%
  - [ ] 計画停止: 月X回、X時間以内

- **障害対応**
  - [ ] 障害検知時間: XX分以内
  - [ ] 復旧時間: XX時間以内
  - [ ] バックアップ頻度: 日次/週次

### 4.3 セキュリティ要件
- **認証・認可**
  - [ ] パスワードポリシー（最小文字数、複雑性）
  - [ ] セッション管理（タイムアウト時間）
  - [ ] 権限ベースのアクセス制御

- **データ保護**
  - [ ] 個人情報の暗号化
  - [ ] 通信の暗号化（HTTPS）
  - [ ] SQLインジェクション対策
  - [ ] XSS対策
  - [ ] CSRF対策

- **監査ログ**
  - [ ] ログイン履歴
  - [ ] 操作履歴
  - [ ] データ変更履歴
  - [ ] ログ保存期間

### 4.4 ユーザビリティ要件
- **操作性**
  - [ ] 直感的なUI設計
  - [ ] 最小限のクリック数で操作完了
  - [ ] エラーメッセージの分かりやすさ
  - [ ] ヘルプ・ガイド機能

- **アクセシビリティ**
  - [ ] 文字サイズ調整
  - [ ] コントラスト比の確保
  - [ ] 多言語対応（必要に応じて）

### 4.5 保守性要件
- **コード品質**
  - [ ] コーディング規約の遵守
  - [ ] コメント記述
  - [ ] モジュール化・再利用性

- **ドキュメント**
  - [ ] 設計書
  - [ ] 運用マニュアル
  - [ ] ユーザーマニュアル
  - [ ] API仕様書

### 4.6 拡張性要件
- [ ] 新機能追加の容易性
- [ ] データ量増加への対応
- [ ] 利用者数増加への対応
- [ ] 外部システム連携の容易性

---

## 5. データモデル要件

### 5.1 主要エンティティ

#### エンティティ1: [例: User（ユーザー）]
| 項目名 | 型 | 必須 | 説明 | 制約 |
|-------|-----|------|------|------|
| id | Integer | ○ | ユーザーID | PK, Auto Increment |
| username | String(50) | ○ | ユーザー名 | Unique |
| password | String(255) | ○ | パスワード（ハッシュ化） | |
| role | String(20) | ○ | 権限 | ADMIN/STAFF/等 |
| is_active | Boolean | ○ | 有効フラグ | デフォルト: True |
| created_at | DateTime | ○ | 作成日時 | |
| updated_at | DateTime | ○ | 更新日時 | |

#### エンティティ2: [例: Session（セッション）]
| 項目名 | 型 | 必須 | 説明 | 制約 |
|-------|-----|------|------|------|
| id | Integer | ○ | セッションID | PK, Auto Increment |
| table_id | Integer | ○ | テーブルID | FK |
| party_size | Integer | ○ | 人数 | 1-99 |
| status | String(20) | ○ | ステータス | ACTIVE/COMPLETED |
| started_at | DateTime | ○ | 開始日時 | |
| completed_at | DateTime | | 完了日時 | |
| total_amount | Integer | ○ | 合計金額 | デフォルト: 0 |

#### エンティティ3: [例: Order（注文）]
| 項目名 | 型 | 必須 | 説明 | 制約 |
|-------|-----|------|------|------|
| id | Integer | ○ | 注文ID | PK, Auto Increment |
| session_id | Integer | ○ | セッションID | FK |
| menu_item_id | Integer | ○ | 商品ID | FK |
| quantity | Integer | ○ | 数量 | 1-10 |
| status | String(20) | ○ | ステータス | PENDING/COOKING/COMPLETED/SERVED |
| ordered_at | DateTime | ○ | 注文日時 | |
| subtotal | Integer | ○ | 小計 | 計算項目 |

#### エンティティ4: [追加のエンティティ]
[必要に応じて追加]

### 5.2 エンティティ関連図（ER図）

```
[User] 1 ─────── * [操作ログ]

[Table] 1 ─────── * [Session]
                      │
                      ├─────── * [Order]
                      │            │
                      │            └─────── * [MenuItem]
                      │
                      └─────── * [StaffCall]
```

### 5.3 ステータス遷移

#### [例: 注文ステータス]
```
PENDING（未着手）
    ↓
COOKING（調理中）
    ↓
COMPLETED（完成）
    ↓
SERVED（提供済）
```

制約:
- [ ] 逆方向への遷移は不可
- [ ] スキップは不可
- [ ] 例外パターン: [あれば記述]

#### [例: セッションステータス]
```
ACTIVE（進行中）
    ↓
COMPLETED（完了）
```

### 5.4 計算項目・集計項目

| 項目名 | 計算式 | 説明 |
|-------|--------|------|
| subtotal（小計） | quantity × menu_item.price | 注文の小計 |
| total_amount（合計金額） | SUM(subtotal) | セッションの合計金額 |
| [その他計算項目] | | |

---

## 6. 画面要件

### 6.1 スマホ画面一覧

| 画面ID | 画面名 | URL | 説明 | アクセス権限 |
|-------|--------|-----|------|------------|
| M-001 | セッション開始画面 | /order?table=X | 初回アクセス画面 | 全員 |
| M-002 | メニュー一覧画面 | /order/menu/ | 商品一覧 | セッション中 |
| M-003 | 注文履歴画面 | /order/history/ | 注文状態確認 | セッション中 |
| M-004 | スタッフ呼び出し画面 | /order/call-staff/ | 呼び出し | セッション中 |
| M-005 | 会計画面 | /order/payment/ | 合計確認 | セッション中 |

### 6.2 管理画面一覧

| 画面ID | 画面名 | URL | 説明 | アクセス権限 |
|-------|--------|-----|------|------------|
| D-001 | ログイン画面 | /management/login/ | 認証 | 全員 |
| D-002 | ダッシュボード | /management/dashboard/ | 注文管理 | ログイン中 |
| D-003 | 商品管理画面 | /management/menu/ | マスタ管理 | 管理者のみ |
| D-004 | 売上管理画面 | /management/sales/ | レポート | 管理者のみ |
| D-005 | ユーザー管理画面 | /management/users/ | ユーザー管理 | 管理者のみ |

### 6.3 画面遷移図

```
[スマホ側]
QRコード読み取り
    ↓
M-001: セッション開始
    ↓
M-002: メニュー一覧 ←→ M-003: 注文履歴
    ↓                    ↓
M-004: 呼び出し    M-005: 会計

[管理側]
D-001: ログイン
    ↓
D-002: ダッシュボード
    ├→ D-003: 商品管理
    ├→ D-004: 売上管理
    └→ D-005: ユーザー管理
```

### 6.4 画面レイアウト要件

#### スマホ画面
- [ ] ヘッダー: タイトル、戻るボタン
- [ ] コンテンツエリア: メイン機能
- [ ] フッター: ナビゲーション（必要に応じて）
- [ ] 固定ボタン（フローティングアクションボタン）

#### 管理画面
- [ ] ヘッダー: タイトル、ログアウトボタン
- [ ] サイドバー: メニュー
- [ ] コンテンツエリア: メイン機能
- [ ] フッター: コピーライト等

---

## 7. 外部連携要件

### 7.1 連携システム一覧

| 連携先 | 連携内容 | 連携方式 | 頻度 | 備考 |
|-------|---------|---------|------|------|
| [例: 決済システム] | 決済処理 | API連携 | リアルタイム | |
| [例: POSシステム] | 売上データ連携 | CSV出力 | 日次 | |
| [例: 在庫システム] | 在庫確認 | API連携 | リアルタイム | |

### 7.2 API仕様（外部提供）

- **認証方式**: [APIキー / OAuth2.0 / JWT]
- **データ形式**: JSON / XML
- **エンドポイント一覧**:

| エンドポイント | メソッド | 説明 | 認証 |
|-------------|---------|------|------|
| /api/orders | GET | 注文一覧取得 | 必要 |
| /api/orders | POST | 注文作成 | 必要 |
| /api/orders/{id} | GET | 注文詳細取得 | 必要 |

---

## 8. 運用要件

### 8.1 初期データ

| データ種別 | 内容 | 件数 | 登録方法 |
|----------|------|------|---------|
| 管理ユーザー | 初期管理者アカウント | 1件 | 手動登録 |
| サンプルデータ | テスト用商品データ | XX件 | バッチ投入 |
| マスタデータ | テーブル情報等 | XX件 | バッチ投入 |

### 8.2 バックアップ・リストア

- **バックアップ対象**: データベース、アップロードファイル
- **バックアップ頻度**: 日次 / 週次
- **保存世代数**: X世代
- **リストア手順**: [手順書へのリンク]

### 8.3 監視項目

| 監視項目 | 監視方法 | 閾値 | アラート通知先 |
|---------|---------|------|--------------|
| サーバー稼働状態 | Ping監視 | 応答なし | 管理者メール |
| ディスク使用率 | エージェント | 80%以上 | 管理者メール |
| エラーログ | ログ監視 | ERROR発生 | 管理者メール |

### 8.4 障害対応

| 障害レベル | 定義 | 対応時間 | 対応者 |
|----------|------|---------|-------|
| 緊急 | システム停止 | 1時間以内 | システム管理者 |
| 重大 | 一部機能停止 | 4時間以内 | システム管理者 |
| 軽微 | 軽微な不具合 | 24時間以内 | 開発担当者 |

---

## 9. テスト要件

### 9.1 テスト種別

- [ ] 単体テスト
- [ ] 結合テスト
- [ ] システムテスト
- [ ] 性能テスト
- [ ] セキュリティテスト
- [ ] ユーザー受け入れテスト（UAT）

### 9.2 テストケース

#### 機能テスト
- [ ] 正常系: 基本フローの動作確認
- [ ] 準正常系: バリデーションエラーの確認
- [ ] 異常系: システムエラーの確認

#### 非機能テスト
- [ ] 性能テスト: 負荷テスト、ストレステスト
- [ ] セキュリティテスト: 脆弱性診断
- [ ] ユーザビリティテスト: 操作性確認

### 9.3 テスト環境

| 環境 | 用途 | URL | データ |
|------|------|-----|-------|
| 開発環境 | 開発中の動作確認 | [URL] | テストデータ |
| テスト環境 | 総合テスト | [URL] | 本番同等データ |
| 本番環境 | 本番稼働 | [URL] | 本番データ |

---

## 10. 移行要件

### 10.1 移行対象データ

| データ種別 | 件数 | 移行元 | 移行方法 |
|----------|------|-------|---------|
| [例: 既存顧客データ] | XX件 | Excelファイル | CSVインポート |
| [例: 商品マスタ] | XX件 | 既存システム | API連携 |

### 10.2 移行スケジュール

| 日程 | 作業内容 | 担当 | 備考 |
|------|---------|------|------|
| D-7日 | 移行リハーサル | 開発チーム | |
| D-1日 | 最終データ抽出 | 運用チーム | |
| D-Day | 本番移行 | 全員 | |

### 10.3 切り戻し基準

- [ ] 重大な障害が発生した場合
- [ ] データ不整合が発生した場合
- [ ] 性能要件を満たさない場合

---

## 11. 教育・トレーニング

### 11.1 対象者別研修

| 対象者 | 研修内容 | 時間 | 方法 |
|-------|---------|------|------|
| 管理者 | 全機能の操作方法 | X時間 | 集合研修 |
| スタッフ | 基本操作、運用手順 | X時間 | 集合研修 |
| エンドユーザー | 使い方ガイド | - | マニュアル配布 |

### 11.2 研修資料

- [ ] 操作マニュアル
- [ ] 運用マニュアル
- [ ] FAQ集
- [ ] 動画マニュアル（オプション）

---

## 12. 制約事項・前提条件

### 12.1 技術的制約
- [ ] [例: 使用可能なサーバースペック]
- [ ] [例: 対応ブラウザのバージョン]
- [ ] [例: インターネット接続必須]

### 12.2 業務的制約
- [ ] [例: 営業時間内のみ稼働]
- [ ] [例: 特定の時期は使用不可]

### 12.3 前提条件
- [ ] [例: スマホを持っていること]
- [ ] [例: Wi-Fi環境が整備されていること]
- [ ] [例: スタッフが最低限のPC操作ができること]

---

## 13. リスク管理

### 13.1 想定リスク

| リスク | 影響度 | 発生確率 | 対策 |
|-------|--------|---------|------|
| [例: ネットワーク障害] | 高 | 中 | [対策内容] |
| [例: 大量アクセスによる性能劣化] | 中 | 低 | [対策内容] |
| [例: セキュリティ侵害] | 高 | 低 | [対策内容] |

### 13.2 緊急連絡先

| 役割 | 氏名 | 連絡先 | 対応範囲 |
|------|------|-------|---------|
| プロジェクトマネージャー | [氏名] | [連絡先] | 全般 |
| システム管理者 | [氏名] | [連絡先] | 技術的問題 |
| 業務責任者 | [氏名] | [連絡先] | 業務的問題 |

---

## 14. スケジュール

### 14.1 マイルストーン

| フェーズ | 開始日 | 終了日 | 成果物 |
|---------|-------|-------|-------|
| 要件定義 | YYYY-MM-DD | YYYY-MM-DD | 要件定義書 |
| 基本設計 | YYYY-MM-DD | YYYY-MM-DD | 基本設計書 |
| 詳細設計 | YYYY-MM-DD | YYYY-MM-DD | 詳細設計書 |
| 開発 | YYYY-MM-DD | YYYY-MM-DD | プログラム |
| テスト | YYYY-MM-DD | YYYY-MM-DD | テスト結果 |
| 本番リリース | YYYY-MM-DD | YYYY-MM-DD | - |

### 14.2 クリティカルパス

- [ ] [特に重要なタスク1]
- [ ] [特に重要なタスク2]
- [ ] [特に重要なタスク3]

---

## 15. コスト見積もり

### 15.1 開発コスト

| 項目 | 単価 | 数量 | 金額 | 備考 |
|------|------|------|------|------|
| 要件定義 | | | | |
| 設計 | | | | |
| 開発 | | | | |
| テスト | | | | |
| **合計** | | | | |

### 15.2 運用コスト（月額）

| 項目 | 金額 | 備考 |
|------|------|------|
| サーバー費用 | | |
| ライセンス費用 | | |
| 保守費用 | | |
| **合計** | | |

---

## 16. 承認

### 16.1 要件承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|-------|------|
| プロジェクトオーナー | | | |
| プロジェクトマネージャー | | | |
| システム責任者 | | | |

### 16.2 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|-----------|------|---------|-------|
| 1.0 | YYYY-MM-DD | 初版作成 | |
| 1.1 | YYYY-MM-DD | [変更内容] | |

---

## 17. 付録

### 17.1 用語集

| 用語 | 定義 |
|------|------|
| セッション | ユーザーがシステムを利用している一連の期間 |
| ダッシュボード | 重要な情報を一覧表示する管理画面 |
| [その他用語] | |

### 17.2 参考資料

- [ ] [参考にした資料1]
- [ ] [参考にした資料2]
- [ ] [参考にした資料3]

### 17.3 関連ドキュメント

- [ ] 基本設計書
- [ ] 詳細設計書
- [ ] テスト計画書
- [ ] 運用マニュアル

---

## チェックリスト

要件定義完了前に以下を確認してください。

### 機能要件
- [ ] エンドユーザー側の全機能が定義されている
- [ ] 管理側の全機能が定義されている
- [ ] 画面一覧が作成されている
- [ ] 画面遷移が定義されている
- [ ] ステータス遷移が定義されている

### データ要件
- [ ] 全エンティティが定義されている
- [ ] エンティティ間の関連が定義されている
- [ ] ステータス値が定義されている
- [ ] バリデーションルールが定義されている

### 非機能要件
- [ ] パフォーマンス要件が定義されている
- [ ] セキュリティ要件が定義されている
- [ ] 可用性要件が定義されている
- [ ] ユーザビリティ要件が定義されている

### 運用要件
- [ ] バックアップ方法が定義されている
- [ ] 監視項目が定義されている
- [ ] 障害対応手順が定義されている

### その他
- [ ] リスクが洗い出されている
- [ ] スケジュールが現実的である
- [ ] コストが見積もられている
- [ ] 関係者の承認が得られている

---

**このテンプレートの使い方:**
1. プロジェクトに応じて不要なセクションは削除してください
2. [ ] チェックボックスを活用して進捗管理してください
3. [例: XXX] の部分は具体的な内容に置き換えてください
4. テーブル形式を活用して情報を整理してください
5. バージョン管理を適切に行ってください
